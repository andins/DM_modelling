function [v, time_steps] = DDM_num(drift, sig, b, duration)

dt = 0.1;  % ms

if isnumeric(duration)
    time_steps = 0:dt:duration;
    v = zeros(1,length(time_steps));

    for t=2:length(time_steps)
        v(t) = v(t-1) + dt*drift + sqrt(dt)*randn()*sig;
    end
elseif strcmp(duration, 'free')
    t=1;
    v(t)=0;
    time_steps(t) = 0;
    while v(t)<=b && v(t)>=-b
        t = t+1;
        time_steps(t) = time_steps(t-1) + dt; 
        v(t) = v(t-1) + dt*drift + sqrt(dt)*randn()*sig;        
    end
else
    error('duration must be either a 